{% extends 'base.html' %} {% block content %}

<div class="card mx-auto" style="width: 85%">
	<div class="card-body">
		<h2 class="card-title text-center">{{drink.name}}</h2>
		{% if g.user %} {% if check_favorites(drink, g.favorites) %}
		<h5 class="text-center">
			<a href="/favorite/delete/{{drink.id}}"><i class="bi bi-heart-fill"></i></a>
		</h5>
		{% else %}
		<h5 class="text-center">
			<a href="/favorite/add/{{drink.id}}"><i class="bi bi-heart"></i></a>
		</h5>
		{% endif %} {% endif %} {% if DrinkPost.query.filter_by(drink_id=drink.id).first() %} {% set post =
		DrinkPost.query.filter_by(drink_id=drink.id).first() %}
		<h5 class="card-subtitle text-center mb-2">
			Bartender: <a href="/profile/{{post.user.id}}">{{post.user.username}}</a>
		</h5>
		{% endif %}
		<h5 class="card-subtitle text-center mb-2">Category: {{drink.category.name}}</h5>
		<h5 class="card-subtitle text-center mb-2">Glass: {{drink.glass.name}}</h5>
		<img src="{{drink.main_img}}" class="card-img" alt="..." />
		<ul class="list-group">
			<h5 class="card-subtitle title-und mt-3">Ingredients:</h5>
			{% for ingredient in ingredients %} {% set i = Ingredient.query.get_or_404(ingredient.ingredient_id) %}
			<li class="list-group-item mb-0">{{i.name}} - {{ingredient.measurement}}</li>
			{% endfor %}
		</ul>
		<h5 class="card-subtitle title-und mt-1 mb-3">Instructions:</h5>
		<p class="card-text">{{drink.instructions}}</p>
	</div>
</div>

<div class="card mx-auto mt-4" style="width: 85%">
	<div class="card-body pt-2">
		<h4 class="card-title text-center">Comments</h4>
		{% if g.user %}
		<h6 class="text-center mb-3"><a href="/{{drink.id}}/comment/add" class="btn btn-sm btn-success">Add</a></h6>
		{% endif %}
		<ul class="list-group">
			{% for comment in drink.comments %} {% set u = User.query.get_or_404(comment.user_id) %}
			<li class="list-group-item list-group-item-light mb-0 pr-0">
				{% if g.user.id == u.id %}
				<div class="container row justify-content-end">
					<a href="/{{comment.id}}/delete"><i class="bi bi-trash" style="position: absolute"></i></a>
				</div>
				{% endif %}
				<p class="card-text mr-5">{{comment.comment}}</p>
				<small><a href="/profile/{{u.id}}">- {{u.username}}</a></small>
			</li>
			<hr />
			{% endfor %}
		</ul>
	</div>
</div>

{% endblock %}
